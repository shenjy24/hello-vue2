{"version":3,"file":"js/report_log-legacy.18e0d1fc.js","mappings":"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","sources":["webpack://jackal-vue2-new/./node_modules/logan-web/build/lib/xhr.js","webpack://jackal-vue2-new/./node_modules/logan-web/build/lib/ajax.js","webpack://jackal-vue2-new/./node_modules/logan-web/build/report-log.js"],"sourcesContent":["var NOOP = function () { };\nexport default function (opts) {\n    var useXDomainRequest = 'XDomainRequest' in window;\n    var req = useXDomainRequest\n        ? new window.XDomainRequest()\n        : new XMLHttpRequest();\n    req.open(opts.type || 'GET', opts.url, true);\n    req.success = opts.success || NOOP;\n    req.fail = opts.fail || NOOP;\n    req.withCredentials = opts.withCredentials;\n    if (useXDomainRequest) {\n        req.onload = opts.success || NOOP;\n        req.onerror = opts.fail || NOOP;\n        req.onprogress = NOOP;\n    }\n    else {\n        req.onreadystatechange = function () {\n            if (req.readyState === 4) {\n                var status_1 = req.status;\n                if (status_1 >= 200) {\n                    opts.success && opts.success(req.responseText);\n                }\n                else {\n                    opts.fail && opts.fail(\"Request failed, status: \" + status_1 + \", responseText: \" + req.responseText);\n                }\n            }\n        };\n    }\n    if (opts.type === 'POST') {\n        if (opts.headers && !useXDomainRequest) {\n            for (var key in opts.headers) {\n                req.setRequestHeader(key, opts.headers[key]);\n            }\n        }\n        req.send(opts.data);\n    }\n    else {\n        req.send();\n    }\n    return req;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport XHR from './xhr';\nexport default (function (url, data, withCredentials, type, headers) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        return [2 /*return*/, new Promise(function (resolve, reject) {\n                XHR({\n                    url: url,\n                    type: type || 'GET',\n                    data: data,\n                    withCredentials: !!withCredentials,\n                    headers: headers,\n                    success: function (responseText) {\n                        resolve(responseText);\n                    },\n                    fail: function (err) {\n                        reject(new Error(err || 'Request failed'));\n                    }\n                });\n            })];\n    });\n}); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ResultMsg } from './interface';\nimport LoganDB from './lib/logan-db';\nimport { LOG_DAY_TABLE_PRIMARY_KEY } from './lib/logan-db';\nimport Config from './global-config';\nimport Ajax from './lib/ajax';\nimport { dayFormat2Date, ONE_DAY_TIME_SPAN, dateFormat2Day } from './lib/utils';\nimport { invokeInQueue } from './logan-operation-queue';\nvar LoganDBInstance;\n/**\n * @returns Promise<number> with reported pageIndex if this page has logs, otherwise Promise<null>.\n */\nfunction getLogAndSend(reportName, reportConfig) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var logItems, pageIndex_1, logItemStrings, logReportOb, customXHROpts_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, LoganDBInstance.getLogsByReportName(reportName)];\n                case 1:\n                    logItems = _b.sent();\n                    if (!(logItems.length > 0)) return [3 /*break*/, 3];\n                    pageIndex_1 = LoganDBInstance.logReportNameParser(reportName).pageIndex;\n                    logItemStrings = logItems\n                        .map(function (logItem) {\n                        return encodeURIComponent(logItem.logString);\n                    });\n                    logReportOb = LoganDBInstance.logReportNameParser(reportName);\n                    customXHROpts_1 = typeof reportConfig.xhrOptsFormatter === 'function' ? reportConfig.xhrOptsFormatter(logItemStrings, logReportOb.pageIndex + 1, logReportOb.logDay) : {};\n                    return [4 /*yield*/, Ajax(customXHROpts_1.reportUrl || reportConfig.reportUrl || Config.get('reportUrl'), customXHROpts_1.data || JSON.stringify({\n                            client: 'Web',\n                            webSource: \"\" + (reportConfig.webSource || ''),\n                            deviceId: reportConfig.deviceId,\n                            environment: \"\" + (reportConfig.environment || ''),\n                            customInfo: \"\" + (reportConfig.customInfo || ''),\n                            logPageNo: logReportOb.pageIndex + 1,\n                            fileDate: logReportOb.logDay,\n                            logArray: logItems\n                                .map(function (logItem) {\n                                return encodeURIComponent(logItem.logString);\n                            })\n                                .toString()\n                        }), (_a = customXHROpts_1.withCredentials, (_a !== null && _a !== void 0 ? _a : false)), 'POST', customXHROpts_1.headers || {\n                            'Content-Type': 'application/json',\n                            'Accept': 'application/json,text/javascript'\n                        }).then(function (responseText) {\n                            var _a, _b;\n                            if (typeof customXHROpts_1.responseDealer === 'function') {\n                                var result = customXHROpts_1.responseDealer(responseText);\n                                if (result.resultMsg === ResultMsg.REPORT_LOG_SUCC) {\n                                    return pageIndex_1;\n                                }\n                                else {\n                                    throw new Error(result.desc);\n                                }\n                            }\n                            else {\n                                var response = void 0;\n                                try {\n                                    response = JSON.parse(responseText);\n                                }\n                                catch (e) {\n                                    throw new Error(\"Try to parse response failed, responseText: \" + responseText);\n                                }\n                                if (((_a = response) === null || _a === void 0 ? void 0 : _a.code) === 200) {\n                                    return pageIndex_1;\n                                }\n                                else {\n                                    throw new Error(\"Server error, code: \" + ((_b = response) === null || _b === void 0 ? void 0 : _b.code));\n                                }\n                            }\n                        })];\n                case 2: return [2 /*return*/, _b.sent()];\n                case 3: \n                // Resolve directly if no logs in current page.\n                return [2 /*return*/, Promise.resolve(null)];\n            }\n        });\n    });\n}\nexport default function reportLog(reportConfig) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!!LoganDB.idbIsSupported()) return [3 /*break*/, 1];\n                    throw new Error(ResultMsg.DB_NOT_SUPPORT);\n                case 1:\n                    if (!LoganDBInstance) {\n                        LoganDBInstance = new LoganDB(Config.get('dbName'));\n                    }\n                    return [4 /*yield*/, invokeInQueue(function () { return __awaiter(_this, void 0, void 0, function () {\n                            var logDaysInfoList, logReportMap, reportResult, startDate, endDate, logTime, logDay, batchReportResults, reportedPageIndexes, e_1, e_2;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, LoganDBInstance.getLogDaysInfo(reportConfig.fromDayString, reportConfig.toDayString)];\n                                    case 1:\n                                        logDaysInfoList = _a.sent();\n                                        logReportMap = logDaysInfoList.reduce(function (acc, logDayInfo) {\n                                            var _a;\n                                            return __assign((_a = {}, _a[logDayInfo[LOG_DAY_TABLE_PRIMARY_KEY]] = logDayInfo.reportPagesInfo ? logDayInfo.reportPagesInfo.pageSizes.map(function (i, pageIndex) {\n                                                return LoganDBInstance.logReportNameFormatter(logDayInfo[LOG_DAY_TABLE_PRIMARY_KEY], pageIndex);\n                                            }) : [], _a), acc);\n                                        }, {});\n                                        reportResult = {};\n                                        startDate = dayFormat2Date(reportConfig.fromDayString);\n                                        endDate = dayFormat2Date(reportConfig.toDayString);\n                                        logTime = +startDate;\n                                        _a.label = 2;\n                                    case 2:\n                                        if (!(logTime <= +endDate)) return [3 /*break*/, 14];\n                                        logDay = dateFormat2Day(new Date(logTime));\n                                        if (!(logReportMap[logDay] && logReportMap[logDay].length > 0)) return [3 /*break*/, 12];\n                                        _a.label = 3;\n                                    case 3:\n                                        _a.trys.push([3, 10, , 11]);\n                                        return [4 /*yield*/, Promise.all(logReportMap[logDay].map(function (reportName) {\n                                                return getLogAndSend(reportName, reportConfig);\n                                            }))];\n                                    case 4:\n                                        batchReportResults = _a.sent();\n                                        reportResult[logDay] = { msg: ResultMsg.REPORT_LOG_SUCC };\n                                        _a.label = 5;\n                                    case 5:\n                                        _a.trys.push([5, 8, , 9]);\n                                        reportedPageIndexes = batchReportResults.filter(function (reportedPageIndex) { return reportedPageIndex !== null; });\n                                        if (!(reportedPageIndexes.length > 0 && reportConfig.incrementalReport)) return [3 /*break*/, 7];\n                                        // Delete logs of reported pages after report.\n                                        return [4 /*yield*/, LoganDBInstance.incrementalDelete(logDay, reportedPageIndexes)];\n                                    case 6:\n                                        // Delete logs of reported pages after report.\n                                        _a.sent();\n                                        _a.label = 7;\n                                    case 7: return [3 /*break*/, 9];\n                                    case 8:\n                                        e_1 = _a.sent();\n                                        return [3 /*break*/, 9];\n                                    case 9: return [3 /*break*/, 11];\n                                    case 10:\n                                        e_2 = _a.sent();\n                                        reportResult[logDay] = {\n                                            msg: ResultMsg.REPORT_LOG_FAIL,\n                                            desc: e_2.message || e_2.stack || JSON.stringify(e_2)\n                                        };\n                                        return [3 /*break*/, 11];\n                                    case 11: return [3 /*break*/, 13];\n                                    case 12:\n                                        reportResult[logDay] = { msg: ResultMsg.NO_LOG };\n                                        _a.label = 13;\n                                    case 13:\n                                        logTime += ONE_DAY_TIME_SPAN;\n                                        return [3 /*break*/, 2];\n                                    case 14: return [2 /*return*/, reportResult];\n                                }\n                            });\n                        }); })];\n                case 2: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\n"],"names":["NOOP","opts","useXDomainRequest","window","req","XDomainRequest","XMLHttpRequest","open","type","url","success","fail","withCredentials","onload","onerror","onprogress","onreadystatechange","readyState","status_1","status","responseText","headers","key","setRequestHeader","send","data","LoganDBInstance","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","_a","XHR","err","Error","__assign","Object","assign","s","i","arguments","p","prototype","hasOwnProperty","getLogAndSend","reportName","reportConfig","logItems","pageIndex_1","logItemStrings","logReportOb","customXHROpts_1","_b","getLogsByReportName","logReportNameParser","pageIndex","map","logItem","encodeURIComponent","logString","xhrOptsFormatter","logDay","Ajax","reportUrl","Config","JSON","stringify","client","webSource","deviceId","environment","customInfo","logPageNo","fileDate","logArray","toString","responseDealer","resultMsg","ResultMsg","desc","response","parse","code","reportLog","_this","LoganDB","invokeInQueue","logDaysInfoList","logReportMap","reportResult","startDate","endDate","logTime","batchReportResults","reportedPageIndexes","e_2","getLogDaysInfo","fromDayString","toDayString","reduce","acc","logDayInfo","LOG_DAY_TABLE_PRIMARY_KEY","reportPagesInfo","pageSizes","logReportNameFormatter","dayFormat2Date","dateFormat2Day","Date","all","msg","filter","reportedPageIndex","incrementalReport","incrementalDelete","message","stack","ONE_DAY_TIME_SPAN"],"sourceRoot":""}